<!DOCTYPE html>
{% load static %}
<html lang="es" class="transition duration-500 ease-in-out">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nudelpa</title>

  <link rel="stylesheet" href="{% static 'src/dist/styles.css' %}" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Acme&family=Licorice&family=Ancizar+Sans&family=Anton&family=Bebas+Neue&family=Lobster&family=Oswald&family=Pacifico&family=Roboto&display=swap"
    rel="stylesheet"
  />

  <script src="https://unpkg.com/scrollreveal" defer></script>
</head>

<body class="m-0 bg-white overflow-x-hidden">

  <!-- HERO -->
  <section id="shapes-section" class="relative min-h-screen overflow-hidden">

    <!-- Shapes -->
    <div id="shapes-container" class="absolute inset-0"></div>

    <!-- Fondo -->
    <div class="absolute inset-x-0 bottom-0 -z-10 h-[300px] md:h-[500px]">
      <img src="{% static 'src/img/bgfondo.png' %}" class="w-full h-full md:h-auto  bottom-0 object-cover" />
    </div>

    <!-- Logo grande -->
    <div class="absolute bottom-0 right-0 z-10 h-[350px] md:h-[630px]">
      <img src="{% static 'src/img/logo2.png' %}" class="h-full w-auto" />
    </div>

    <!-- Logo pequeño -->
    <div class="absolute top-3 left-4 z-10 w-28 md:w-40">
      <img src="{% static 'src/img/logo.png' %}" class="w-full h-auto" />
    </div>

    <!-- Contenido -->
    <div class="relative z-10 max-w-7xl mx-auto px-5 md:px-10 pt-24 grid grid-cols-1 md:grid-cols-5 gap-8 items-center">

      <!-- Texto -->
      <div class="md:col-span-3 ">
        <h1 class="text-[28px] md:text-[65px] font-primary leading-tight mb-3">
          <span class="bg-linear-to-r from-red-900 to-red-300 bg-clip-text text-transparent">
            Órdenes de Trabajo<br />Nudelpa Ltda.
          </span>
        </h1>

        <p class="text-neutral-300 text-sm md:text-base md:max-w-[600px] mb-6">
          Sistema web diseñado para administrar, monitorear y dar seguimiento a las Órdenes de Trabajo
  de Nudelpa Ltda., facilitando una gestión ágil, segura y centralizada.
        </p>

        <div class="flex flex-col sm:flex-row gap-3 ">
          <a
            href="#"
            class="bg-linear-to-r from-red-900 to-red-700 hover:to-red-600 px-6 py-3 rounded-full text-white transition flex items-center justify-center gap-2"
          >
            Comunica con Nosotros
          </a>

          <button
            id="openLoginModal"
            class="backdrop-blur-lg border border-red-300/40 bg-white/50 hover:bg-white/20 text-red-500 md:text-white px-6 py-3 rounded-full transition"
          >
            Iniciar Sesión
          </button>
        </div>
      </div>

      <!-- Espacio visual derecho -->
      <div class="md:col-span-2  h-[300px] md:h-[500px]"></div>
    </div>
  </section>

  <div class="fixed bottom-6 right-6 flex flex-col gap-4 z-40">
      <!-- WhatsApp -->
      <a href="https://wa.me/59168954003" 
         target="_blank"
         class="bg-green-500 hover:bg-green-600 text-white p-3 rounded-full shadow-lg transition-all hover:scale-110">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
        </svg>
      </a>

      <!-- Botón subir -->
      <button onclick="window.scrollTo({top: 0, behavior: 'smooth'})"
              class="bg-slate-700  hover:bg-slate-800 text-white p-3 rounded-full shadow-lg transition-all hover:scale-110">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/>
        </svg>
      </button>
    </div>

    <!-- MODAL LOGIN -->
    <div id="loginModal" class="fixed inset-0 z-50 {% if not show_login_modal %}hidden{% endif %}">
      <div class="modal-overlay absolute inset-0 bg-black/40" aria-hidden="true"></div>

      <div class="relative mx-auto mt-20 w-full max-w-md px-4">
        <div class="rounded-2xl py-6 bg-neutral-50  shadow-xl border border-neutral-200/10">
          <div class="flex items-center justify-between px-5 py-1">
            <h3 class="font-primary  text-xl">Iniciar sesión</h3>
            <button id="closeLoginBtn" class="h-8 w-8 rounded-full text-yellow-900 hover:bg-neutral-100 flex items-center justify-center" aria-label="Cerrar">
              <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            </button>
          </div>

          <img src="{% static 'src/img/logo.png' %}" alt="Logo Villavicencio" class=" mx-auto w-40 h-auto" />
          
          <form method="post" action="{% url 'login' %}" class="px-5 pt-2 pb-6 space-y-4 text-green-50">
            {% csrf_token %}
            <input type="hidden" name="next" value="{{ request.GET.next|default:'' }}" />

            <div>
              <label class="block text-sm text-neutral-800 font-medium mb-1">Correo electrónico</label>
              <input type="email" name="email" value="{{ form.email.value|default_if_none:'' }}"
                     class="w-full rounded-xl text-slate-900 border border-neutral-500/20 px-3 h-11 focus:outline-none focus:ring-2 focus:ring-neutral-800"
                     placeholder="tucorreo@ejemplo.com" required />
              {% if form.email.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.email.errors.0 }}</p>
              {% endif %}
            </div>

            <div>
              <label class="block text-sm text-neutral-800 font-medium mb-1">Contraseña</label>
              <input type="password" name="password"
                     class="w-full rounded-xl border text-slate-900 border-neutral-500/20 px-3 h-11 focus:outline-none focus:ring-2 focus:ring-neutral-800"
                     placeholder="••••••••" required />
              {% if form.password.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.password.errors.0 }}</p>
              {% endif %}
            </div>

            <div class="flex items-center justify-between">
              <label class="inline-flex items-center gap-2 text-sm">
                <input type="checkbox" name="remember_me" class="rounded border-neutral-300" {% if form.remember_me.value %}checked{% endif %} />
                Recordarme
              </label>
              <a href="#" class="text-sm text-neutral-400 hover:text-neutral-900">¿Olvidaste tu contraseña?</a>
            </div>

            {% if form.non_field_errors %}
              <p class="text-sm text-red-600">{{ form.non_field_errors.0 }}</p>
            {% endif %}

            <button type="submit" class="w-full inline-flex items-center justify-center rounded-xl h-11 font-semibold bg-red-500  text-white hover:opacity-90">
              Entrar
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- JS al final -->
    <script>
      (function(){
        const root = document.getElementById('catCarousel');
        if(!root) return;

        const track  = root.querySelector('[data-carousel-track]');
        const slides = root.querySelectorAll('[data-slide-index]');
        const dots   = root.querySelectorAll('[data-dot]');
        const btnPrev= root.querySelector('[data-prev]');
        const btnNext= root.querySelector('[data-next]');
        const total  = slides.length;

        let idx = 0, timer = null;

        function go(i){
          if(!total) return;
          idx = (i + total) % total;
          track.style.transform = `translateX(-${idx * 100}%)`;
          dots.forEach((d, k)=> d.style.background = k===idx ? 'rgba(255,255,255,0.95)' : 'rgba(255,255,255,0.4)');
          restart();
        }
        function next(){ go(idx + 1); }
        function prev(){ go(idx - 1); }
        function restart(){
          if(timer) clearInterval(timer);
          timer = setInterval(next, 6000);
        }

        btnPrev && btnPrev.addEventListener('click', prev);
        btnNext && btnNext.addEventListener('click', next);
        dots.forEach((d, k)=> d.addEventListener('click', ()=> go(k)));
        go(0);
      })();

      // Modal login + animaciones
      (function(){
        const modal   = document.getElementById('loginModal');
        const openBtn = document.getElementById('openLoginModal');
        const closeBtn= document.getElementById('closeLoginBtn');
        const overlay = modal ? modal.querySelector('.modal-overlay') : null;

        function openModal(){ modal.classList.remove('hidden'); document.body.classList.add('overflow-hidden'); }
        function closeModal(){ modal.classList.add('hidden'); document.body.classList.remove('overflow-hidden'); }

        if (openBtn)  openBtn.addEventListener('click', (e)=>{ e.preventDefault(); openModal(); });
        if (closeBtn) closeBtn.addEventListener('click', (e)=>{ e.preventDefault(); closeModal(); });
        if (overlay)  overlay.addEventListener('click', closeModal);

        document.addEventListener('keydown', (e)=>{
          if (e.key === 'Escape' && modal && !modal.classList.contains('hidden')) closeModal();
        });

        // ScrollReveal
        if (window.ScrollReveal) {
          const sr = ScrollReveal();
          sr.reveal('.imginit', { duration: 3000, origin: 'top',   distance: '-100px' });
          sr.reveal('.p1',      { duration: 2000, origin: 'left',  distance: '-100px' });
          sr.reveal('.p2',      { duration: 2000, origin: 'right', distance: '-100px' });
        }
      })();
    </script>
  <!-- SCRIPTS -->
  <script>
const images = [
  "{% static 'src/img/p1.png' %}",
  "{% static 'src/img/p2.png' %}",
  "{% static 'src/img/p3.png' %}",
  "{% static 'src/img/p4.png' %}",
  "{% static 'src/img/p5.png' %}",
];

const container = document.getElementById('shapes-container');

function random(min, max) {
  return Math.random() * (max - min) + min;
}

function createShape() {
  const img = document.createElement('img');
  img.src = images[Math.floor(Math.random() * images.length)];
  img.style.position = 'absolute';
  
  const size = random(30, 180); 
  img.style.width = size + 'px';
  img.style.left = random(0, window.innerWidth - size) + 'px';
  
  // Punto de partida
  img.style.bottom = '-150px';
  img.style.opacity = 0;
  
  // --- ALTURA DE MUERTE ALEATORIA ---
  // El objeto puede morir desde el 20% hasta el 100% de la altura de la pantalla
  const travelHeight = random(window.innerHeight * 0.2, window.innerHeight + 150);
  
  // La duración debe ser proporcional a la distancia para que no se vean frenéticas las que mueren cerca
  const duration = random(3, 6); 
  const targetOpacity = random(0.4, 0.8); // Opacidad aleatoria para profundidad

  // Transiciones: notarás que añadí un retraso al opacity para el desvanecimiento final
  img.style.transition = `bottom ${duration}s linear, 
                          transform ${duration}s linear, 
                          opacity ${duration * 0.5}s ease-in`;

  container.appendChild(img);

  // Forzar reflujo
  img.getClientRects();

  requestAnimationFrame(() => {
    img.style.bottom = travelHeight + 'px';
    img.style.opacity = targetOpacity;
    img.style.transform = `rotate(${random(-360, 360)}deg)`;
  });

  // --- EFECTO DE DESVANECIMIENTO FINAL ---
  // Empezamos a ocultar la imagen un poco antes de que termine su movimiento
  setTimeout(() => {
    img.style.opacity = 0;
  }, (duration * 1000) * 0.7); // Empieza a desaparecer al 70% del camino

  // Limpieza total
  setTimeout(() => {
    img.remove();
  }, duration * 1000);
}

// Inicialización
for (let i = 0; i < 15; i++) { 
  setTimeout(createShape, random(0, 2000));
}

// Generación constante
setInterval(createShape, 250); 
</script>

</body>
</html>
